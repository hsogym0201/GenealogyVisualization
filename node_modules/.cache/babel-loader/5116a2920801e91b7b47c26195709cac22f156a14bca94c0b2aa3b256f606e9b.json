{"ast":null,"code":"export default {\n  data: function () {\n    return {};\n  },\n  props: {\n    wordArr: {\n      type: Array,\n      default: () => []\n    }\n  },\n  methods: {\n    // 启动词云\n    startWorldCloud: function (updateFlag) {\n      this.createTagListDom();\n      let o = {\n        maxSpeed: 0.01,\n        minSpeed: 0.01,\n        textHeight: 25,\n        outlineMethod: \"colour\",\n        fadeIn: 800,\n        outlineColour: \"#fff456aa\",\n        outlineOffset: 0,\n        depth: 0.97,\n        minBrightness: 0.2,\n        wheelZoom: false,\n        reverse: true,\n        shadowBlur: 2,\n        shuffleTags: true,\n        shadowOffset: [1, 1],\n        stretchX: 2,\n        // 水平方向更大\n        stretchY: 1,\n        // 垂直方向更大\n        initial: [0.1, 0.1],\n        textFont: null,\n        textColour: null,\n        weight: true,\n        weightMode: \"size\",\n        weightSize: 1,\n        onTagHover: this.onTagHover // 添加onTagHover回调\n      };\n      try {\n        if (!updateFlag) {\n          // eslint-disable-next-line no-undef\n          TagCanvas.Start(\"world-cloud-canvas\", \"weightTags\", o);\n        } else {\n          // eslint-disable-next-line no-undef\n          TagCanvas.Update(\"world-cloud-canvas\");\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    },\n    // 根据父组件传过来的 wordArr 创建 TagList Dom列表，放到页面中供 canvas 渲染\n    createTagListDom: function () {\n      let res = [...this.wordArr];\n      let fragment = new DocumentFragment();\n      for (let i = 0; i < res.length; i++) {\n        let a = document.createElement(\"a\");\n\n        // 字符串长度大于10就要换行\n        if (res[i].name.length > 10) {\n          let charArr = res[i].name.split(\"\");\n          charArr.splice(10, 0, \"<br>\");\n          res[i].name = charArr.join(\"\");\n        }\n        a.innerHTML = res[i].name;\n        a.href = \"javascript:void(0)\";\n\n        // 数据前十名/数据10-20/数据20-30\n        if (res[i].light === \"large\") {\n          a.className = \"large\";\n        } else if (res[i].light === \"medium\") {\n          a.className = \"medium\";\n        } else if (res[i].light === \"small\") {\n          a.className = \"small\";\n        }\n\n        // 为每个词添加点击事件，触发反馈信息\n        a.addEventListener(\"click\", () => {\n          this.$emit(\"word-clicked\", res[i]);\n        });\n        fragment.append(a);\n      }\n      let tagsContainer = document.querySelector(\"#weightTags\");\n      tagsContainer.innerHTML = \"\";\n      tagsContainer.append(fragment);\n    },\n    // 鼠标悬停时触发 tooltip\n    onTagHover: function (tag) {\n      const tooltip = document.getElementById(\"tooltip\");\n      tooltip.innerHTML = `词语: ${tag.name}<br>更多信息: ${tag.extraInfo || '无'}`;\n      tooltip.style.display = \"block\"; // 显示 tooltip\n      const mouseX = event.clientX + 10;\n      const mouseY = event.clientY + 10;\n      tooltip.style.left = `${mouseX}px`; // 设置弹窗位置\n      tooltip.style.top = `${mouseY}px`;\n    },\n    // 鼠标移出时隐藏 tooltip\n    onTagLeave: function () {\n      const tooltip = document.getElementById(\"tooltip\");\n      tooltip.style.display = \"none\"; // 隐藏 tooltip\n    }\n  },\n  watch: {\n    // 如果词云发生变化就要重绘 tagcanvas\n    wordArr: function () {\n      this.startWorldCloud(true);\n    }\n  },\n  mounted() {\n    // 组件装载成果 绘制 tagcanvas\n    this.startWorldCloud();\n  }\n};","map":{"version":3,"names":["data","props","wordArr","type","Array","default","methods","startWorldCloud","updateFlag","createTagListDom","o","maxSpeed","minSpeed","textHeight","outlineMethod","fadeIn","outlineColour","outlineOffset","depth","minBrightness","wheelZoom","reverse","shadowBlur","shuffleTags","shadowOffset","stretchX","stretchY","initial","textFont","textColour","weight","weightMode","weightSize","onTagHover","TagCanvas","Start","Update","e","console","error","res","fragment","DocumentFragment","i","length","a","document","createElement","name","charArr","split","splice","join","innerHTML","href","light","className","addEventListener","$emit","append","tagsContainer","querySelector","tag","tooltip","getElementById","extraInfo","style","display","mouseX","event","clientX","mouseY","clientY","left","top","onTagLeave","watch","mounted"],"sources":["D:\\project\\idea-project\\jiapudemo1\\jiapudemo1\\src\\components\\CiYun.vue"],"sourcesContent":["<template>\r\n  <div class=\"world-cloud-3d\">\r\n    <div class=\"world-cloud-canvas-wrapper\">\r\n      <canvas\r\n          id=\"world-cloud-canvas\"\r\n          width=\"800\"\r\n          height=\"400\"\r\n          style=\"width: 100%; max-width: 600px\"\r\n      ></canvas>\r\n    </div>\r\n    <div style=\"display: none\" id=\"weightTags\"></div>\r\n\r\n    <!-- Tooltip 弹窗 -->\r\n    <div id=\"tooltip\" style=\"position: absolute; display: none; background-color: rgba(0, 0, 0, 0.7); color: white; padding: 5px; border-radius: 5px; pointer-events: none;\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data: function () {\r\n    return {};\r\n  },\r\n  props: {\r\n    wordArr: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n  },\r\n  methods: {\r\n    // 启动词云\r\n    startWorldCloud: function (updateFlag) {\r\n      this.createTagListDom();\r\n      let o = {\r\n        maxSpeed: 0.01,\r\n        minSpeed: 0.01,\r\n        textHeight: 25,\r\n        outlineMethod: \"colour\",\r\n        fadeIn: 800,\r\n        outlineColour: \"#fff456aa\",\r\n        outlineOffset: 0,\r\n        depth: 0.97,\r\n        minBrightness: 0.2,\r\n        wheelZoom: false,\r\n        reverse: true,\r\n        shadowBlur: 2,\r\n        shuffleTags: true,\r\n        shadowOffset: [1, 1],\r\n        stretchX: 2, // 水平方向更大\r\n        stretchY: 1, // 垂直方向更大\r\n        initial: [0.1, 0.1],\r\n        textFont: null,\r\n        textColour: null,\r\n        weight: true,\r\n        weightMode: \"size\",\r\n        weightSize: 1,\r\n        onTagHover: this.onTagHover, // 添加onTagHover回调\r\n      };\r\n      try {\r\n        if (!updateFlag) {\r\n          // eslint-disable-next-line no-undef\r\n          TagCanvas.Start(\"world-cloud-canvas\", \"weightTags\", o);\r\n        } else {\r\n          // eslint-disable-next-line no-undef\r\n          TagCanvas.Update(\"world-cloud-canvas\");\r\n        }\r\n      } catch (e) {\r\n        console.error(e);\r\n      }\r\n    },\r\n\r\n    // 根据父组件传过来的 wordArr 创建 TagList Dom列表，放到页面中供 canvas 渲染\r\n    createTagListDom: function () {\r\n      let res = [...this.wordArr];\r\n      let fragment = new DocumentFragment();\r\n      for (let i = 0; i < res.length; i++) {\r\n        let a = document.createElement(\"a\");\r\n\r\n        // 字符串长度大于10就要换行\r\n        if (res[i].name.length > 10) {\r\n          let charArr = res[i].name.split(\"\");\r\n          charArr.splice(10, 0, \"<br>\");\r\n          res[i].name = charArr.join(\"\");\r\n        }\r\n\r\n        a.innerHTML = res[i].name;\r\n        a.href = \"javascript:void(0)\";\r\n\r\n        // 数据前十名/数据10-20/数据20-30\r\n        if (res[i].light === \"large\") {\r\n          a.className = \"large\";\r\n        } else if (res[i].light === \"medium\") {\r\n          a.className = \"medium\";\r\n        } else if (res[i].light === \"small\") {\r\n          a.className = \"small\";\r\n        }\r\n\r\n        // 为每个词添加点击事件，触发反馈信息\r\n        a.addEventListener(\"click\", () => {\r\n          this.$emit(\"word-clicked\", res[i]);\r\n        });\r\n\r\n        fragment.append(a);\r\n      }\r\n      let tagsContainer = document.querySelector(\"#weightTags\");\r\n      tagsContainer.innerHTML = \"\";\r\n      tagsContainer.append(fragment);\r\n    },\r\n\r\n    // 鼠标悬停时触发 tooltip\r\n    onTagHover: function (tag) {\r\n      const tooltip = document.getElementById(\"tooltip\");\r\n      tooltip.innerHTML = `词语: ${tag.name}<br>更多信息: ${tag.extraInfo || '无'}`;\r\n      tooltip.style.display = \"block\"; // 显示 tooltip\r\n      const mouseX = event.clientX + 10;\r\n      const mouseY = event.clientY + 10;\r\n      tooltip.style.left = `${mouseX}px`; // 设置弹窗位置\r\n      tooltip.style.top = `${mouseY}px`;\r\n    },\r\n\r\n    // 鼠标移出时隐藏 tooltip\r\n    onTagLeave: function () {\r\n      const tooltip = document.getElementById(\"tooltip\");\r\n      tooltip.style.display = \"none\"; // 隐藏 tooltip\r\n    }\r\n  },\r\n  watch: {\r\n    // 如果词云发生变化就要重绘 tagcanvas\r\n    wordArr: function () {\r\n      this.startWorldCloud(true);\r\n    },\r\n  },\r\n  mounted() {\r\n    // 组件装载成果 绘制 tagcanvas\r\n    this.startWorldCloud();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.world-cloud-3d {\r\n  .world-cloud-canvas-wrapper {\r\n    width: 600px;\r\n    height: 400px;\r\n    max-width: 600px;\r\n    max-height: 400px;\r\n    overflow: visible; // 确保文字不被截断\r\n    padding: 20px; // 给文字和边界预留空间\r\n  }\r\n\r\n  #weightTags {\r\n    font-size: 12px;\r\n    .large {\r\n      font-size: 70px;\r\n      color: #E64A19;  /* 标准橙红 */\r\n    }\r\n    .medium {\r\n      font-size: 55px;\r\n      color: #e4ae77;\r\n    }\r\n    .small {\r\n      font-size: 35px;\r\n      color: #FFAB40;  /* 金橙色 */\r\n    }\r\n  }\r\n\r\n  /* Tooltip 样式 */\r\n  #tooltip {\r\n    position: absolute;\r\n    background-color: rgba(0, 0, 0, 0.7);\r\n    color: white;\r\n    padding: 8px;\r\n    border-radius: 5px;\r\n    font-size: 14px;\r\n    pointer-events: none; /* 防止 Tooltip 阻止其他元素的鼠标事件 */\r\n    z-index: 9999;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}